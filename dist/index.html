<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WeatherWardrobe Login</title>

    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="css/fontawesome.min.css" />
    <link rel="stylesheet" href="css/templatemo-style.css">
  
</head>
<body>
  <div class="container tm-mt-big tm-mb-big">
      <div class="row">
          <div class="col-12 mx-auto tm-login-col">
              <div class="tm-bg-primary-dark tm-block tm-block-h-auto">
                  <div class="row">
                      <div class="col-12 text-center">
                          <h2 class="tm-block-title mb-4">Welcome to Dashboard, Login</h2>
                      </div>
                  </div>
                  <div class="row mt-2">
                      <div class="col-12 d-flex justify-content-center">
                          <button class="mt-5 btn btn-primary btn-block text-uppercase">
                              Sign In with Google
                          </button>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
</body>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-analytics.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup   } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";

    const firebaseConfig = {
    apiKey: "AIzaSyCmnqjXlksqhtHumP8WyKcTMsJ_hY7ys2E",
    authDomain: "faheemfirebase-7e868.firebaseapp.com",
    projectId: "faheemfirebase-7e868",
    storageBucket: "faheemfirebase-7e868.appspot.com",
    messagingSenderId: "804165468060",
    appId: "1:804165468060:web:a6f9a3c79013605c9dd259",
    measurementId: "G-FEG0FPGY1W"
  };
    
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    
    const googleSigninbtn = document.querySelector('.mt-5.btn.btn-primary.btn-block.text-uppercase');
    const provider = new GoogleAuthProvider();
    const auth = getAuth(app);
  
    googleSigninbtn.addEventListener('click',()=>{
    signInWithPopup(auth, provider).then((result)=> {
    const user = result.user;
  
    swal({
      title: "Success!",
      text: user.email+" \n \n Login successful !",
      icon: "success",
      button: "OK",
    }).then(() => {
      window.location.replace("home.html"); 
    });
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    console.log(errorMessage);
    swal("Error", errorMessage, "error");
  });		  		  
});
</script>    
</html>

